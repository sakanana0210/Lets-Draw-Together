"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/drawing",{

/***/ "./pages/drawing/components/DrawingCanvas.js":
/*!***************************************************!*\
  !*** ./pages/drawing/components/DrawingCanvas.js ***!
  \***************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-redux */ \"./node_modules/react-redux/es/index.js\");\n/* harmony import */ var _store_actions_actionCreators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../store/actions/actionCreators */ \"./store/actions/actionCreators.js\");\n/* harmony import */ var _styles_drawingCanvas_module_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../styles/drawingCanvas.module.scss */ \"./pages/drawing/styles/drawingCanvas.module.scss\");\n/* harmony import */ var _styles_drawingCanvas_module_scss__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_styles_drawingCanvas_module_scss__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _utils_rgbToHsv__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/rgbToHsv */ \"./utils/rgbToHsv.js\");\n/* harmony import */ var fabric__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! fabric */ \"./node_modules/fabric/dist/fabric.js\");\n/* harmony import */ var fabric__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(fabric__WEBPACK_IMPORTED_MODULE_5__);\n\nvar _s = $RefreshSig$();\n\n\n\n\n\n\n// import _ from 'lodash';\nfunction CanvasApp() {\n    _s();\n    const dispatch = (0,react_redux__WEBPACK_IMPORTED_MODULE_2__.useDispatch)();\n    const canvasRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const canvasContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const selectedTool = (0,react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector)((state)=>state.tool.selectedTool);\n    const selectedRGB = (0,react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector)((state)=>state.canvas.selectedRGB);\n    const painting = (0,react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector)((state)=>state.canvas.painting);\n    const selectedBrushSize = (0,react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector)((state)=>state.brush.brushSize);\n    const selectedBrushOpacity = (0,react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector)((state)=>state.brush.brushOpacity);\n    const selectedEraserSize = (0,react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector)((state)=>state.brush.eraserSize);\n    const selectedPencilSize = (0,react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector)((state)=>state.brush.pencilSize);\n    const selectedPencilOpacity = (0,react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector)((state)=>state.brush.pencilOpacity);\n    const [canvas, setCanvas] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [zoom, setZoom] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(1);\n    const [relationshipX, setRelationshipX] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [relationshipY, setRelationshipY] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [isDragging, setIsDragging] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [dragPosition, setDragPosition] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        x: 0,\n        y: 0\n    });\n    const [dragOffset, setDragOffset] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        x: 0,\n        y: 0\n    });\n    const [zoomPositon, setZoomPositon] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"center\");\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const newCanvas = new fabric__WEBPACK_IMPORTED_MODULE_5__.fabric.Canvas(canvasRef.current, {\n            backgroundColor: \"white\",\n            width: 800,\n            height: 400,\n            isDrawingMode: true,\n            selection: false\n        });\n        setCanvas(newCanvas);\n        return ()=>{\n            newCanvas.dispose();\n        };\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (canvas) {\n            if (selectedTool === \"brush\") {\n                canvas.isDrawingMode = true;\n                const colorString = \"rgba(\".concat(selectedRGB[0], \", \").concat(selectedRGB[1], \", \").concat(selectedRGB[2], \", \").concat(selectedBrushOpacity / 100, \")\");\n                const PencilBrush = new fabric__WEBPACK_IMPORTED_MODULE_5__.fabric.PencilBrush(canvas);\n                canvas.freeDrawingBrush = PencilBrush;\n                PencilBrush.color = colorString;\n                ;\n                PencilBrush.width = selectedBrushSize;\n            } else if (selectedTool === \"pencil\") {\n                canvas.isDrawingMode = true;\n                const colorString = \"rgba(\".concat(selectedRGB[0], \", \").concat(selectedRGB[1], \", \").concat(selectedRGB[2], \", \").concat(selectedPencilOpacity / 100, \")\");\n                const PencilBrush = new fabric__WEBPACK_IMPORTED_MODULE_5__.fabric.PencilBrush(canvas);\n                canvas.freeDrawingBrush = PencilBrush;\n                PencilBrush.color = colorString;\n                PencilBrush.width = selectedPencilSize;\n                PencilBrush.strokeLineCap = \"square\";\n            } else if (selectedTool === \"eyedropper\") {\n                canvas.isDrawingMode = false;\n                canvas.getObjects().forEach((obj, index)=>{\n                    obj.evented = false;\n                });\n            } else if (selectedTool === \"eraser\") {\n                canvas.isDrawingMode = true;\n                const EraserBrush = new fabric__WEBPACK_IMPORTED_MODULE_5__.fabric.EraserBrush(canvas);\n                canvas.freeDrawingBrush = EraserBrush;\n                EraserBrush.width = selectedEraserSize;\n            } else if (selectedTool === \"move\") {\n                canvas.isDrawingMode = false;\n            }\n            const handleMouseDown = (e)=>{\n                if (selectedTool === \"eyedropper\") {\n                    const scaleX = window.devicePixelRatio;\n                    const scaleY = window.devicePixelRatio;\n                    const x = Math.floor(e.pointer.x * scaleX);\n                    const y = Math.floor(e.pointer.y * scaleY);\n                    const ctx = canvas.getContext(\"2d\");\n                    const imageData = ctx.getImageData(x, y, 1, 1).data;\n                    const pixelColor = Array.from(imageData);\n                    const newHSV = (0,_utils_rgbToHsv__WEBPACK_IMPORTED_MODULE_4__.rgbToHsv)(pixelColor[0], pixelColor[1], pixelColor[2]);\n                    dispatch((0,_store_actions_actionCreators__WEBPACK_IMPORTED_MODULE_3__.setRGB)(pixelColor, newHSV));\n                }\n                ;\n            };\n            canvas.on(\"mouse:down\", handleMouseDown);\n            return ()=>{\n                canvas.off(\"mouse:down\", handleMouseDown);\n            };\n        }\n    }, [\n        selectedTool,\n        selectedPencilOpacity,\n        selectedPencilSize,\n        selectedBrushSize,\n        selectedBrushOpacity,\n        selectedRGB,\n        selectedEraserSize\n    ]);\n    const handleWheel = (e)=>{\n        const currentZoom = zoom;\n        const rect = canvasRef.current.getBoundingClientRect();\n        const mouseX = Math.round((e.clientX - rect.left) / currentZoom);\n        const mouseY = Math.round((e.clientY - rect.top) / currentZoom);\n        const delta = e.deltaY;\n        const zoomSpeed = 1.1;\n        const newZoom = zoom * (delta > 0 ? 1 / zoomSpeed : zoomSpeed);\n        const minZoom = 0.5;\n        const maxZoom = 10;\n        const clampedZoom = Math.min(maxZoom, Math.max(minZoom, newZoom));\n        setZoom(clampedZoom);\n        setZoomPositon(\"\".concat(mouseX, \"px, \").concat(mouseY, \"px)\"));\n    };\n    const handleMouseDownForDrag = (e)=>{\n        if (selectedTool === \"move\") {\n            setIsDragging(true);\n            setDragOffset({\n                x: e.clientX - dragPosition.x,\n                y: e.clientY - dragPosition.y\n            });\n        }\n    };\n    const handleMouseMoveForDrag = (e)=>{\n        if (selectedTool === \"move\") {\n            if (isDragging) {\n                setDragPosition({\n                    x: e.clientX - dragOffset.x,\n                    y: e.clientY - dragOffset.y\n                });\n            }\n        }\n    };\n    const handleMouseUpForDrag = ()=>{\n        if (selectedTool === \"move\") {\n            setIsDragging(false);\n        }\n    };\n    const handleZoomUp = ()=>{\n        const zoomSpeed = 0.5;\n        const newZoom = zoom + zoomSpeed;\n        const minZoom = 0.5;\n        const maxZoom = 10;\n        const clampedZoom = Math.min(maxZoom, Math.max(minZoom, newZoom));\n        setZoom(clampedZoom);\n    };\n    const handleZoomDown = ()=>{\n        const zoomSpeed = 0.5;\n        const newZoom = zoom - zoomSpeed;\n        const minZoom = 0.5;\n        const maxZoom = 10;\n        const clampedZoom = Math.min(maxZoom, Math.max(minZoom, newZoom));\n        setZoom(clampedZoom);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: (_styles_drawingCanvas_module_scss__WEBPACK_IMPORTED_MODULE_6___default().canvasContainer),\n        onWheel: handleWheel,\n        ref: canvasContainerRef,\n        onMouseDown: handleMouseDownForDrag,\n        onMouseMove: handleMouseMoveForDrag,\n        onMouseUp: handleMouseUpForDrag,\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    transform: \"scale(\".concat(zoom, \") translate(\").concat(dragPosition.x, \"px, \").concat(dragPosition.y, \"px)\"),\n                    transformOrigin: \"\".concat(zoomPositon)\n                },\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"canvas\", {\n                    className: (_styles_drawingCanvas_module_scss__WEBPACK_IMPORTED_MODULE_6___default().canvas),\n                    ref: canvasRef\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\sakan\\\\Documents\\\\drawing_app_nextjs\\\\pages\\\\drawing\\\\components\\\\DrawingCanvas.js\",\n                    lineNumber: 162,\n                    columnNumber: 21\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\sakan\\\\Documents\\\\drawing_app_nextjs\\\\pages\\\\drawing\\\\components\\\\DrawingCanvas.js\",\n                lineNumber: 161,\n                columnNumber: 17\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: (_styles_drawingCanvas_module_scss__WEBPACK_IMPORTED_MODULE_6___default().zoomPercent),\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: [\n                            parseInt(zoom * 100, 10),\n                            \"%\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\sakan\\\\Documents\\\\drawing_app_nextjs\\\\pages\\\\drawing\\\\components\\\\DrawingCanvas.js\",\n                        lineNumber: 165,\n                        columnNumber: 21\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: handleZoomUp,\n                        children: \"+\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\sakan\\\\Documents\\\\drawing_app_nextjs\\\\pages\\\\drawing\\\\components\\\\DrawingCanvas.js\",\n                        lineNumber: 166,\n                        columnNumber: 21\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: handleZoomDown,\n                        children: \"-\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\sakan\\\\Documents\\\\drawing_app_nextjs\\\\pages\\\\drawing\\\\components\\\\DrawingCanvas.js\",\n                        lineNumber: 167,\n                        columnNumber: 21\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\sakan\\\\Documents\\\\drawing_app_nextjs\\\\pages\\\\drawing\\\\components\\\\DrawingCanvas.js\",\n                lineNumber: 164,\n                columnNumber: 17\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\sakan\\\\Documents\\\\drawing_app_nextjs\\\\pages\\\\drawing\\\\components\\\\DrawingCanvas.js\",\n        lineNumber: 159,\n        columnNumber: 12\n    }, this);\n}\n_s(CanvasApp, \"Cgeb3p8fEaMVrtz+uIpoI/NFRUI=\", false, function() {\n    return [\n        react_redux__WEBPACK_IMPORTED_MODULE_2__.useDispatch,\n        react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector,\n        react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector,\n        react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector,\n        react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector,\n        react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector,\n        react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector,\n        react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector,\n        react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector\n    ];\n});\n_c = CanvasApp;\n/* harmony default export */ __webpack_exports__[\"default\"] = (CanvasApp);\nvar _c;\n$RefreshReg$(_c, \"CanvasApp\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9kcmF3aW5nL2NvbXBvbmVudHMvRHJhd2luZ0NhbnZhcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUEyRDtBQUNKO0FBQ3FDO0FBQ25DO0FBQ1Q7QUFDaEI7QUFDaEMsMEJBQTBCO0FBRTFCLFNBQVNZOztJQUNMLE1BQU1DLFdBQVdSLHdEQUFXQTtJQUM1QixNQUFNUyxZQUFZYiw2Q0FBTUEsQ0FBQztJQUN6QixNQUFNYyxxQkFBcUJkLDZDQUFNQSxDQUFDO0lBQ2xDLE1BQU1lLGVBQWVaLHdEQUFXQSxDQUFDLENBQUNhLFFBQVVBLE1BQU1DLElBQUksQ0FBQ0YsWUFBWTtJQUNuRSxNQUFNRyxjQUFjZix3REFBV0EsQ0FBQyxDQUFDYSxRQUFVQSxNQUFNRyxNQUFNLENBQUNELFdBQVc7SUFDbkUsTUFBTUUsV0FBV2pCLHdEQUFXQSxDQUFDLENBQUNhLFFBQVVBLE1BQU1HLE1BQU0sQ0FBQ0MsUUFBUTtJQUM3RCxNQUFNQyxvQkFBb0JsQix3REFBV0EsQ0FBQyxDQUFDYSxRQUFVQSxNQUFNTSxLQUFLLENBQUNDLFNBQVM7SUFDdEUsTUFBTUMsdUJBQXVCckIsd0RBQVdBLENBQUMsQ0FBQ2EsUUFBVUEsTUFBTU0sS0FBSyxDQUFDRyxZQUFZO0lBQzVFLE1BQU1DLHFCQUFzQnZCLHdEQUFXQSxDQUFDLENBQUNhLFFBQVVBLE1BQU1NLEtBQUssQ0FBQ0ssVUFBVTtJQUN6RSxNQUFNQyxxQkFBcUJ6Qix3REFBV0EsQ0FBQyxDQUFDYSxRQUFVQSxNQUFNTSxLQUFLLENBQUNPLFVBQVU7SUFDeEUsTUFBTUMsd0JBQXdCM0Isd0RBQVdBLENBQUMsQ0FBQ2EsUUFBVUEsTUFBTU0sS0FBSyxDQUFDUyxhQUFhO0lBQzlFLE1BQU0sQ0FBQ1osUUFBUWEsVUFBVSxHQUFHOUIsK0NBQVFBLENBQUM7SUFDckMsTUFBTSxDQUFDK0IsTUFBTUMsUUFBUSxHQUFHaEMsK0NBQVFBLENBQUM7SUFDakMsTUFBTSxDQUFDaUMsZUFBZUMsaUJBQWlCLEdBQUdsQywr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RUEscUJBQU8sOERBQUNRO1FBQUlDLFdBQVczRywwRkFBc0I7UUFBRTZHLFNBQVM1QjtRQUFhNkIsS0FBS3hHO1FBQzlEeUcsYUFBYVY7UUFBdUJXLGFBQWFWO1FBQXdCVyxXQUFXVjs7MEJBQ3BGLDhEQUFDRztnQkFBSVEsT0FBTztvQkFBRUMsV0FBVyxTQUE0QmxGLE9BQW5CUixNQUFLLGdCQUFtQ1EsT0FBckJBLGFBQWFFLENBQUMsRUFBQyxRQUFxQixPQUFmRixhQUFhRyxDQUFDLEVBQUM7b0JBQU1nRixpQkFBaUIsR0FBZSxPQUFaN0U7Z0JBQWM7MEJBQzdILDRFQUFDNUI7b0JBQU9nRyxXQUFXM0csaUZBQWE7b0JBQUU4RyxLQUFLekc7Ozs7Ozs7Ozs7OzBCQUUzQyw4REFBQ3FHO2dCQUFJUSxPQUFPbEgsc0ZBQWtCOztrQ0FDMUIsOERBQUMwRzs7NEJBQUtZLFNBQVM3RixPQUFPLEtBQUs7NEJBQUk7Ozs7Ozs7a0NBQy9CLDhEQUFDOEY7d0JBQU9DLFNBQVNoQjtrQ0FBYzs7Ozs7O2tDQUMvQiw4REFBQ2U7d0JBQU9DLFNBQVNmO2tDQUFnQjs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR3JEO0dBaktTdEc7O1FBQ1lQLG9EQUFXQTtRQUdQRCxvREFBV0E7UUFDWkEsb0RBQVdBO1FBQ2RBLG9EQUFXQTtRQUNGQSxvREFBV0E7UUFDUkEsb0RBQVdBO1FBQ1pBLG9EQUFXQTtRQUNaQSxvREFBV0E7UUFDUkEsb0RBQVdBOzs7S0FYcENRO0FBa0tULCtEQUFlQSxTQUFTQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3BhZ2VzL2RyYXdpbmcvY29tcG9uZW50cy9EcmF3aW5nQ2FudmFzLmpzP2I5MzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVJlZiwgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlU2VsZWN0b3IsIHVzZURpc3BhdGNoIH0gZnJvbSAncmVhY3QtcmVkdXgnO1xyXG5pbXBvcnQgeyBzZXRSR0IsIHN0YXJ0UGFpbnRpbmcsIHN0b3BQYWludGluZyB9IGZyb20gJy4uLy4uLy4uL3N0b3JlL2FjdGlvbnMvYWN0aW9uQ3JlYXRvcnMnO1xyXG5pbXBvcnQgc3R5bGVzICBmcm9tICcuLi9zdHlsZXMvZHJhd2luZ0NhbnZhcy5tb2R1bGUuc2NzcycgXHJcbmltcG9ydCB7cmdiVG9Ic3Z9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3JnYlRvSHN2J1xyXG5pbXBvcnQgeyBmYWJyaWMgfSBmcm9tICdmYWJyaWMnO1xyXG4vLyBpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xyXG5cclxuZnVuY3Rpb24gQ2FudmFzQXBwKCkge1xyXG4gICAgY29uc3QgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpO1xyXG4gICAgY29uc3QgY2FudmFzUmVmID0gdXNlUmVmKG51bGwpO1xyXG4gICAgY29uc3QgY2FudmFzQ29udGFpbmVyUmVmID0gdXNlUmVmKG51bGwpO1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRUb29sID0gdXNlU2VsZWN0b3IoKHN0YXRlKSA9PiBzdGF0ZS50b29sLnNlbGVjdGVkVG9vbCk7XHJcbiAgICBjb25zdCBzZWxlY3RlZFJHQiA9IHVzZVNlbGVjdG9yKChzdGF0ZSkgPT4gc3RhdGUuY2FudmFzLnNlbGVjdGVkUkdCKTtcclxuICAgIGNvbnN0IHBhaW50aW5nID0gdXNlU2VsZWN0b3IoKHN0YXRlKSA9PiBzdGF0ZS5jYW52YXMucGFpbnRpbmcpO1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRCcnVzaFNpemUgPSB1c2VTZWxlY3Rvcigoc3RhdGUpID0+IHN0YXRlLmJydXNoLmJydXNoU2l6ZSk7XHJcbiAgICBjb25zdCBzZWxlY3RlZEJydXNoT3BhY2l0eSA9IHVzZVNlbGVjdG9yKChzdGF0ZSkgPT4gc3RhdGUuYnJ1c2guYnJ1c2hPcGFjaXR5KTtcclxuICAgIGNvbnN0IHNlbGVjdGVkRXJhc2VyU2l6ZSAgPSB1c2VTZWxlY3Rvcigoc3RhdGUpID0+IHN0YXRlLmJydXNoLmVyYXNlclNpemUpO1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRQZW5jaWxTaXplID0gdXNlU2VsZWN0b3IoKHN0YXRlKSA9PiBzdGF0ZS5icnVzaC5wZW5jaWxTaXplKTtcclxuICAgIGNvbnN0IHNlbGVjdGVkUGVuY2lsT3BhY2l0eSA9IHVzZVNlbGVjdG9yKChzdGF0ZSkgPT4gc3RhdGUuYnJ1c2gucGVuY2lsT3BhY2l0eSk7XHJcbiAgICBjb25zdCBbY2FudmFzLCBzZXRDYW52YXNdID0gdXNlU3RhdGUobnVsbCk7XHJcbiAgICBjb25zdCBbem9vbSwgc2V0Wm9vbV0gPSB1c2VTdGF0ZSgxKTtcclxuICAgIGNvbnN0IFtyZWxhdGlvbnNoaXBYLCBzZXRSZWxhdGlvbnNoaXBYXSA9IHVzZVN0YXRlKDApO1xyXG4gICAgY29uc3QgW3JlbGF0aW9uc2hpcFksIHNldFJlbGF0aW9uc2hpcFldID0gdXNlU3RhdGUoMCk7XHJcbiAgICBjb25zdCBbaXNEcmFnZ2luZywgc2V0SXNEcmFnZ2luZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgICBjb25zdCBbZHJhZ1Bvc2l0aW9uLCBzZXREcmFnUG9zaXRpb25dID0gdXNlU3RhdGUoeyB4OiAwLCB5OiAwIH0pO1xyXG4gICAgY29uc3QgW2RyYWdPZmZzZXQsIHNldERyYWdPZmZzZXRdID0gdXNlU3RhdGUoeyB4OiAwLCB5OiAwIH0pO1xyXG4gICAgY29uc3QgW3pvb21Qb3NpdG9uLCBzZXRab29tUG9zaXRvbl0gPSB1c2VTdGF0ZShcImNlbnRlclwiKTtcclxuXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5ld0NhbnZhcyAgPSBuZXcgZmFicmljLkNhbnZhcyhjYW52YXNSZWYuY3VycmVudCwge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZScsXHJcbiAgICAgICAgICAgIHdpZHRoOiA4MDAsXHJcbiAgICAgICAgICAgIGhlaWdodDogNDAwLFxyXG4gICAgICAgICAgICBpc0RyYXdpbmdNb2RlOiB0cnVlLFxyXG4gICAgICAgICAgICBzZWxlY3Rpb246IGZhbHNlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNldENhbnZhcyhuZXdDYW52YXMpO1xyXG5cclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICBuZXdDYW52YXMuZGlzcG9zZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICB9LCBbXSk7XHJcbiAgICBcclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKGNhbnZhcykge1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRUb29sID09PSAnYnJ1c2gnKSB7XHJcbiAgICAgICAgICAgICAgICBjYW52YXMuaXNEcmF3aW5nTW9kZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2xvclN0cmluZyA9IGByZ2JhKCR7c2VsZWN0ZWRSR0JbMF19LCAke3NlbGVjdGVkUkdCWzFdfSwgJHtzZWxlY3RlZFJHQlsyXX0sICR7c2VsZWN0ZWRCcnVzaE9wYWNpdHkgLyAxMDB9KWA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBQZW5jaWxCcnVzaCA9IG5ldyBmYWJyaWMuUGVuY2lsQnJ1c2goY2FudmFzKTtcclxuICAgICAgICAgICAgICAgIGNhbnZhcy5mcmVlRHJhd2luZ0JydXNoID0gUGVuY2lsQnJ1c2g7XHJcbiAgICAgICAgICAgICAgICBQZW5jaWxCcnVzaC5jb2xvciA9IGNvbG9yU3RyaW5nOztcclxuICAgICAgICAgICAgICAgIFBlbmNpbEJydXNoLndpZHRoID0gc2VsZWN0ZWRCcnVzaFNpemU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZihzZWxlY3RlZFRvb2wgPT09ICdwZW5jaWwnKXtcclxuICAgICAgICAgICAgICAgIGNhbnZhcy5pc0RyYXdpbmdNb2RlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9yU3RyaW5nID0gYHJnYmEoJHtzZWxlY3RlZFJHQlswXX0sICR7c2VsZWN0ZWRSR0JbMV19LCAke3NlbGVjdGVkUkdCWzJdfSwgJHtzZWxlY3RlZFBlbmNpbE9wYWNpdHkgLyAxMDB9KWA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBQZW5jaWxCcnVzaCA9IG5ldyBmYWJyaWMuUGVuY2lsQnJ1c2goY2FudmFzKTtcclxuICAgICAgICAgICAgICAgIGNhbnZhcy5mcmVlRHJhd2luZ0JydXNoID0gUGVuY2lsQnJ1c2g7XHJcbiAgICAgICAgICAgICAgICBQZW5jaWxCcnVzaC5jb2xvciA9IGNvbG9yU3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgUGVuY2lsQnJ1c2gud2lkdGggPSBzZWxlY3RlZFBlbmNpbFNpemU7XHJcbiAgICAgICAgICAgICAgICBQZW5jaWxCcnVzaC5zdHJva2VMaW5lQ2FwID0gJ3NxdWFyZSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsZWN0ZWRUb29sID09PSAnZXllZHJvcHBlcicpIHtcclxuICAgICAgICAgICAgICAgIGNhbnZhcy5pc0RyYXdpbmdNb2RlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjYW52YXMuZ2V0T2JqZWN0cygpLmZvckVhY2goKG9iaiwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBvYmouZXZlbnRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZihzZWxlY3RlZFRvb2wgPT09ICdlcmFzZXInKXtcclxuICAgICAgICAgICAgICAgIGNhbnZhcy5pc0RyYXdpbmdNb2RlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IEVyYXNlckJydXNoID0gbmV3IGZhYnJpYy5FcmFzZXJCcnVzaChjYW52YXMpXHJcbiAgICAgICAgICAgICAgICBjYW52YXMuZnJlZURyYXdpbmdCcnVzaCA9IEVyYXNlckJydXNoO1xyXG4gICAgICAgICAgICAgICAgRXJhc2VyQnJ1c2gud2lkdGggPSBzZWxlY3RlZEVyYXNlclNpemU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZihzZWxlY3RlZFRvb2wgPT09ICdtb3ZlJyl7XHJcbiAgICAgICAgICAgICAgICBjYW52YXMuaXNEcmF3aW5nTW9kZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBoYW5kbGVNb3VzZURvd24gPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkVG9vbCA9PT0gJ2V5ZWRyb3BwZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NhbGVYID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NhbGVZID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeCA9IE1hdGguZmxvb3IoKGUucG9pbnRlci54KSAqIHNjYWxlWCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeSA9IE1hdGguZmxvb3IoKGUucG9pbnRlci55KSAqIHNjYWxlWSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1hZ2VEYXRhID0gY3R4LmdldEltYWdlRGF0YSh4LCB5LCAxLCAxKS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBpeGVsQ29sb3IgPSBBcnJheS5mcm9tKGltYWdlRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3SFNWID0gcmdiVG9Ic3YocGl4ZWxDb2xvclswXSwgcGl4ZWxDb2xvclsxXSwgcGl4ZWxDb2xvclsyXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goc2V0UkdCKHBpeGVsQ29sb3IsIG5ld0hTVikpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGNhbnZhcy5vbignbW91c2U6ZG93bicsIGhhbmRsZU1vdXNlRG93bik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2FudmFzLm9mZignbW91c2U6ZG93bicsIGhhbmRsZU1vdXNlRG93bik7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIH0gICBcclxuICAgIH0sIFtzZWxlY3RlZFRvb2wsc2VsZWN0ZWRQZW5jaWxPcGFjaXR5LCBzZWxlY3RlZFBlbmNpbFNpemUsIHNlbGVjdGVkQnJ1c2hTaXplLCBzZWxlY3RlZEJydXNoT3BhY2l0eSwgc2VsZWN0ZWRSR0IsIHNlbGVjdGVkRXJhc2VyU2l6ZV0pO1xyXG5cclxuICAgIGNvbnN0IGhhbmRsZVdoZWVsID0gKGUpID0+IHtcclxuICAgICAgICBjb25zdCBjdXJyZW50Wm9vbSA9IHpvb207XHJcbiAgICAgICAgY29uc3QgcmVjdCA9IGNhbnZhc1JlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGNvbnN0IG1vdXNlWCA9IE1hdGgucm91bmQoKGUuY2xpZW50WCAtIHJlY3QubGVmdCkgLyBjdXJyZW50Wm9vbSk7XHJcbiAgICAgICAgY29uc3QgbW91c2VZID0gTWF0aC5yb3VuZCgoZS5jbGllbnRZIC0gcmVjdC50b3ApIC8gY3VycmVudFpvb20pO1xyXG4gICAgICAgIGNvbnN0IGRlbHRhID0gZS5kZWx0YVk7XHJcbiAgICAgICAgY29uc3Qgem9vbVNwZWVkID0gMS4xO1xyXG4gICAgICAgIGNvbnN0IG5ld1pvb20gPSB6b29tICogKGRlbHRhID4gMCA/IDEgLyB6b29tU3BlZWQgOiB6b29tU3BlZWQpO1xyXG4gICAgICAgIGNvbnN0IG1pblpvb20gPSAwLjU7XHJcbiAgICAgICAgY29uc3QgbWF4Wm9vbSA9IDEwO1xyXG4gICAgICAgIGNvbnN0IGNsYW1wZWRab29tID0gTWF0aC5taW4obWF4Wm9vbSwgTWF0aC5tYXgobWluWm9vbSwgbmV3Wm9vbSkpO1xyXG4gICAgICAgIHNldFpvb20oY2xhbXBlZFpvb20pO1xyXG4gICAgICAgIHNldFpvb21Qb3NpdG9uKGAke21vdXNlWH1weCwgJHttb3VzZVl9cHgpYCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGhhbmRsZU1vdXNlRG93bkZvckRyYWcgPSAoZSkgPT4ge1xyXG4gICAgICAgIGlmKHNlbGVjdGVkVG9vbCA9PT0gJ21vdmUnKXtcclxuICAgICAgICAgICAgc2V0SXNEcmFnZ2luZyh0cnVlKTtcclxuICAgICAgICAgICAgc2V0RHJhZ09mZnNldCh7XHJcbiAgICAgICAgICAgICAgICB4OiBlLmNsaWVudFggLSBkcmFnUG9zaXRpb24ueCxcclxuICAgICAgICAgICAgICAgIHk6IGUuY2xpZW50WSAtIGRyYWdQb3NpdGlvbi55XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgaGFuZGxlTW91c2VNb3ZlRm9yRHJhZyA9IChlKSA9PiB7XHJcbiAgICAgICAgaWYoc2VsZWN0ZWRUb29sID09PSAnbW92ZScpe1xyXG4gICAgICAgICAgICBpZiAoaXNEcmFnZ2luZykge1xyXG4gICAgICAgICAgICAgICAgc2V0RHJhZ1Bvc2l0aW9uKHtcclxuICAgICAgICAgICAgICAgIHg6IGUuY2xpZW50WCAtIGRyYWdPZmZzZXQueCxcclxuICAgICAgICAgICAgICAgIHk6IGUuY2xpZW50WSAtIGRyYWdPZmZzZXQueVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGhhbmRsZU1vdXNlVXBGb3JEcmFnID0gKCkgPT4ge1xyXG4gICAgICAgIGlmKHNlbGVjdGVkVG9vbCA9PT0gJ21vdmUnKXtcclxuICAgICAgICAgICAgc2V0SXNEcmFnZ2luZyhmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBoYW5kbGVab29tVXAgPSAoKSA9PntcclxuICAgICAgICBjb25zdCB6b29tU3BlZWQgPSAwLjU7XHJcbiAgICAgICAgY29uc3QgbmV3Wm9vbSA9IHpvb20gKyB6b29tU3BlZWQ7XHJcbiAgICAgICAgY29uc3QgbWluWm9vbSA9IDAuNTtcclxuICAgICAgICBjb25zdCBtYXhab29tID0gMTA7XHJcbiAgICAgICAgY29uc3QgY2xhbXBlZFpvb20gPSBNYXRoLm1pbihtYXhab29tLCBNYXRoLm1heChtaW5ab29tLCBuZXdab29tKSk7XHJcbiAgICAgICAgc2V0Wm9vbShjbGFtcGVkWm9vbSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaGFuZGxlWm9vbURvd24gPSAoKSA9PntcclxuICAgICAgICBjb25zdCB6b29tU3BlZWQgPSAwLjU7XHJcbiAgICAgICAgY29uc3QgbmV3Wm9vbSA9IHpvb20gLSB6b29tU3BlZWQ7XHJcbiAgICAgICAgY29uc3QgbWluWm9vbSA9IDAuNTtcclxuICAgICAgICBjb25zdCBtYXhab29tID0gMTA7XHJcbiAgICAgICAgY29uc3QgY2xhbXBlZFpvb20gPSBNYXRoLm1pbihtYXhab29tLCBNYXRoLm1heChtaW5ab29tLCBuZXdab29tKSk7XHJcbiAgICAgICAgc2V0Wm9vbShjbGFtcGVkWm9vbSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuY2FudmFzQ29udGFpbmVyfSBvbldoZWVsPXtoYW5kbGVXaGVlbH0gcmVmPXtjYW52YXNDb250YWluZXJSZWZ9IFxyXG4gICAgICAgICAgICAgICAgb25Nb3VzZURvd249e2hhbmRsZU1vdXNlRG93bkZvckRyYWd9b25Nb3VzZU1vdmU9e2hhbmRsZU1vdXNlTW92ZUZvckRyYWd9IG9uTW91c2VVcD17aGFuZGxlTW91c2VVcEZvckRyYWd9PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyB0cmFuc2Zvcm06IGBzY2FsZSgke3pvb219KSB0cmFuc2xhdGUoJHtkcmFnUG9zaXRpb24ueH1weCwgJHtkcmFnUG9zaXRpb24ueX1weClgLCB0cmFuc2Zvcm1PcmlnaW46IGAke3pvb21Qb3NpdG9ufWAgfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGNhbnZhcyBjbGFzc05hbWU9e3N0eWxlcy5jYW52YXN9IHJlZj17Y2FudmFzUmVmfSAgLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17c3R5bGVzLnpvb21QZXJjZW50fT5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2PntwYXJzZUludCh6b29tICogMTAwLCAxMCl9JTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlWm9vbVVwfT4rPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVab29tRG93bn0+LTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IENhbnZhc0FwcDsiXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsInVzZVNlbGVjdG9yIiwidXNlRGlzcGF0Y2giLCJzZXRSR0IiLCJzdGFydFBhaW50aW5nIiwic3RvcFBhaW50aW5nIiwic3R5bGVzIiwicmdiVG9Ic3YiLCJmYWJyaWMiLCJDYW52YXNBcHAiLCJkaXNwYXRjaCIsImNhbnZhc1JlZiIsImNhbnZhc0NvbnRhaW5lclJlZiIsInNlbGVjdGVkVG9vbCIsInN0YXRlIiwidG9vbCIsInNlbGVjdGVkUkdCIiwiY2FudmFzIiwicGFpbnRpbmciLCJzZWxlY3RlZEJydXNoU2l6ZSIsImJydXNoIiwiYnJ1c2hTaXplIiwic2VsZWN0ZWRCcnVzaE9wYWNpdHkiLCJicnVzaE9wYWNpdHkiLCJzZWxlY3RlZEVyYXNlclNpemUiLCJlcmFzZXJTaXplIiwic2VsZWN0ZWRQZW5jaWxTaXplIiwicGVuY2lsU2l6ZSIsInNlbGVjdGVkUGVuY2lsT3BhY2l0eSIsInBlbmNpbE9wYWNpdHkiLCJzZXRDYW52YXMiLCJ6b29tIiwic2V0Wm9vbSIsInJlbGF0aW9uc2hpcFgiLCJzZXRSZWxhdGlvbnNoaXBYIiwicmVsYXRpb25zaGlwWSIsInNldFJlbGF0aW9uc2hpcFkiLCJpc0RyYWdnaW5nIiwic2V0SXNEcmFnZ2luZyIsImRyYWdQb3NpdGlvbiIsInNldERyYWdQb3NpdGlvbiIsIngiLCJ5IiwiZHJhZ09mZnNldCIsInNldERyYWdPZmZzZXQiLCJ6b29tUG9zaXRvbiIsInNldFpvb21Qb3NpdG9uIiwibmV3Q2FudmFzIiwiQ2FudmFzIiwiY3VycmVudCIsImJhY2tncm91bmRDb2xvciIsIndpZHRoIiwiaGVpZ2h0IiwiaXNEcmF3aW5nTW9kZSIsInNlbGVjdGlvbiIsImRpc3Bvc2UiLCJjb2xvclN0cmluZyIsIlBlbmNpbEJydXNoIiwiZnJlZURyYXdpbmdCcnVzaCIsImNvbG9yIiwic3Ryb2tlTGluZUNhcCIsImdldE9iamVjdHMiLCJmb3JFYWNoIiwib2JqIiwiaW5kZXgiLCJldmVudGVkIiwiRXJhc2VyQnJ1c2giLCJoYW5kbGVNb3VzZURvd24iLCJlIiwic2NhbGVYIiwid2luZG93IiwiZGV2aWNlUGl4ZWxSYXRpbyIsInNjYWxlWSIsIk1hdGgiLCJmbG9vciIsInBvaW50ZXIiLCJjdHgiLCJnZXRDb250ZXh0IiwiaW1hZ2VEYXRhIiwiZ2V0SW1hZ2VEYXRhIiwiZGF0YSIsInBpeGVsQ29sb3IiLCJBcnJheSIsImZyb20iLCJuZXdIU1YiLCJvbiIsIm9mZiIsImhhbmRsZVdoZWVsIiwiY3VycmVudFpvb20iLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibW91c2VYIiwicm91bmQiLCJjbGllbnRYIiwibGVmdCIsIm1vdXNlWSIsImNsaWVudFkiLCJ0b3AiLCJkZWx0YSIsImRlbHRhWSIsInpvb21TcGVlZCIsIm5ld1pvb20iLCJtaW5ab29tIiwibWF4Wm9vbSIsImNsYW1wZWRab29tIiwibWluIiwibWF4IiwiaGFuZGxlTW91c2VEb3duRm9yRHJhZyIsImhhbmRsZU1vdXNlTW92ZUZvckRyYWciLCJoYW5kbGVNb3VzZVVwRm9yRHJhZyIsImhhbmRsZVpvb21VcCIsImhhbmRsZVpvb21Eb3duIiwiZGl2IiwiY2xhc3NOYW1lIiwiY2FudmFzQ29udGFpbmVyIiwib25XaGVlbCIsInJlZiIsIm9uTW91c2VEb3duIiwib25Nb3VzZU1vdmUiLCJvbk1vdXNlVXAiLCJzdHlsZSIsInRyYW5zZm9ybSIsInRyYW5zZm9ybU9yaWdpbiIsInpvb21QZXJjZW50IiwicGFyc2VJbnQiLCJidXR0b24iLCJvbkNsaWNrIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./pages/drawing/components/DrawingCanvas.js\n"));

/***/ })

});